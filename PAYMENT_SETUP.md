# 支付功能配置指南

## 概述
本电商平台已集成支付宝、微信支付和银行转账的个人收款功能。这是一个真实可行的解决方案，适合个人商户使用。

## 支付方式

### 1. 支付宝转账
- **特点**: 使用支付宝个人收款码
- **配置**: 需要上传支付宝收款码图片
- **流程**: 用户扫码转账 → 手动确认收款 → 订单状态更新

### 2. 微信支付
- **特点**: 使用微信个人收款码  
- **配置**: 需要上传微信收款码图片
- **流程**: 用户扫码转账 → 手动确认收款 → 订单状态更新

### 3. 银行转账
- **特点**: 提供银行账户信息
- **配置**: 在代码中设置银行账户信息
- **流程**: 用户银行转账 → 手动确认收款 → 订单状态更新

## 配置步骤

### 第一步：准备收款码
1. 打开支付宝，进入"收钱"功能，截图保存收款码
2. 打开微信，进入"收付款" → "二维码收款"，截图保存收款码
3. 将两个收款码图片分别命名为 `alipay-qr.png` 和 `wechat-qr.png`

### 第二步：上传收款码图片
```bash
# 将收款码图片复制到项目目录
cp /path/to/your/alipay-qr.png public/images/payment/
cp /path/to/your/wechat-qr.png public/images/payment/
```

### 第三步：配置银行账户信息
编辑 `src/services/payment-service.ts` 文件，更新银行账户信息：

```typescript
bank: {
  bankName: '中国工商银行',              // 改为您的银行名称
  accountNumber: '6222 **** **** 1234',  // 改为您的卡号（隐藏部分数字）
  accountName: '张三',                   // 改为您的真实姓名
  branch: '北京分行营业部'               // 改为您的开户行
}
```

### 第四步：配置收款账号信息
同样在 `payment-service.ts` 中更新：

```typescript
alipay: {
  account: 'your-alipay@example.com',    // 改为您的支付宝账号
  name: '您的店铺名称',
  qrCodeUrl: 'images/payment/alipay-qr.png'
},
wechat: {
  account: 'Your-WeChat-ID',             // 改为您的微信号
  name: '您的店铺名称',
  qrCodeUrl: 'images/payment/wechat-qr.png'
}
```

## 订单管理

### 订单状态
- **pending**: 待支付
- **paid**: 已支付
- **processing**: 处理中
- **shipped**: 已发货
- **delivered**: 已送达
- **cancelled**: 已取消

### 确认支付流程
1. 客户完成支付后点击"我已完成支付"
2. 订单状态自动更新为"已支付"
3. 商户收到支付通知后可手动处理订单

### 订单数据存储
- 订单数据存储在浏览器 localStorage 中
- 生产环境建议使用数据库存储
- 订单号格式：SG + 时间戳 + 随机数

## 费用计算

### 运费计算
- 满5000元免运费
- 偏远地区（新疆、西藏等）运费25元
- 其他地区运费15元

### 税费计算
- 订单金额超过50000元征收10%奢侈品税
- 一般订单无额外税费

## 安全提醒

1. **收款码安全**: 定期更换收款码，避免长期使用同一个
2. **订单验证**: 建议对大额订单进行电话确认
3. **数据备份**: 定期备份订单数据，避免数据丢失
4. **钓鱼防范**: 注意识别虚假付款截图

## 扩展功能

### 集成第三方支付（可选）
如需更专业的支付解决方案，可考虑：
- **个人商户**: 易宝支付、汇付天下个人版
- **企业商户**: 支付宝当面付、微信支付官方API
- **跨境支付**: PayPal、Stripe

### 自动对账（高级）
```typescript
// 可添加自动对账功能
class PaymentVerification {
  static async verifyPayment(orderId: string, amount: number): Promise<boolean> {
    // 调用支付接口验证
    // 对比订单金额和实际收款金额
    // 返回验证结果
  }
}
```

## 法律合规

1. **个人经营**: 确保符合当地个人经营相关法规
2. **税务申报**: 及时申报相关税务
3. **消费者保护**: 遵守电商平台消费者保护法规
4. **数据保护**: 妥善保护客户个人信息

## 常见问题

**Q: 如何处理支付纠纷？**
A: 保留完整的订单记录和支付凭证，必要时可提供相关证据。

**Q: 收款码被盗用怎么办？**
A: 立即更换收款码，联系支付平台客服处理。

**Q: 如何提高支付成功率？**
A: 提供多种支付方式，优化支付流程，及时响应客户咨询。

**Q: 可以设置自动发货吗？**
A: 当前版本需要手动处理，后续可添加自动化流程。

---

**注意**: 本功能适用于个人小型电商，如需处理大量订单建议升级至企业级支付解决方案。 